"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4960],{8363:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var t=i(5893),r=i(1151),s=i(3992),o=i(425);const l={id:"solution-deploy-ier",sidebar_position:4,title:"IBM Enterprise Records"},a=void 0,c={id:"Create/Deploy/solution-deploy-ier",title:"IBM Enterprise Records",description:"Deploy IER",source:"@site/docs/3-Create/Deploy/ier.mdx",sourceDirName:"3-Create/Deploy",slug:"/Create/Deploy/solution-deploy-ier",permalink:"/solution-filenet-aws/Create/Deploy/solution-deploy-ier",draft:!1,unlisted:!1,editUrl:"https://github.com/ibm-client-engineering/solution-filenet-aws/tree/main/packages/create-docusaurus/templates/shared/docs/3-Create/Deploy/ier.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"solution-deploy-ier",sidebar_position:4,title:"IBM Enterprise Records"},sidebar:"tutorialSidebar",previous:{title:"FNCM Operator",permalink:"/solution-filenet-aws/Create/Deploy/solution-deploy-operator"},next:{title:"Process Designer",permalink:"/solution-filenet-aws/Create/Deploy/solution-deploy-workflow"}},d={},p=[{value:"Deploy IER",id:"deploy-ier",level:2},{value:"Create the <code>ibm-ier-secret</code>",id:"create-the-ibm-ier-secret",level:3},{value:"Create the config map <code>fncmdeploy-tm-custom-env</code>",id:"create-the-config-map-fncmdeploy-tm-custom-env",level:3},{value:"Update the CR for Task Manager",id:"update-the-cr-for-task-manager",level:3},{value:"Updating CR for IER deployment",id:"updating-cr-for-ier-deployment",level:3},{value:"Uploading config jars to the Task Manager pod",id:"uploading-config-jars-to-the-task-manager-pod",level:3},{value:"Apply the CR",id:"apply-the-cr",level:3},{value:"IER Configuration",id:"ier-configuration",level:2},{value:"Profile Creation",id:"profile-creation",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Applying fix for IER",id:"applying-fix-for-ier",level:3},{value:"Troubleshoot",id:"troubleshoot",level:2},{value:"On Configuration Manager",id:"on-configuration-manager",level:3},{value:"On deploying IER (IER pod doesn&#39;t start properly or it starts but getting ssl related error)",id:"on-deploying-ier-ier-pod-doesnt-start-properly-or-it-starts-but-getting-ssl-related-error",level:3},{value:"On Content Navigator (when declaring FPOS as File Plan repository)",id:"on-content-navigator-when-declaring-fpos-as-file-plan-repository",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"deploy-ier",children:"Deploy IER"}),"\n",(0,t.jsx)(n.p,{children:"If IBM Enterprise Records is required, you should have already staged the image per the previous instructions in Staging."}),"\n",(0,t.jsxs)(n.h3,{id:"create-the-ibm-ier-secret",children:["Create the ",(0,t.jsx)(n.code,{children:"ibm-ier-secret"})]}),"\n",(0,t.jsx)(n.p,{children:"If deploying IER, create the following"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'kubectl create secret generic ibm-ier-secret \\\n--from-literal=appLoginUsername="cpadmin" \\\n--from-literal=appLoginPassword="Password" \\\n--from-literal=keystorePassword="p@ssw0rd" \\\n--from-literal=ltpaPassword="p@ssw0rd"\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"create-the-config-map-fncmdeploy-tm-custom-env",children:["Create the config map ",(0,t.jsx)(n.code,{children:"fncmdeploy-tm-custom-env"})]}),"\n",(0,t.jsxs)(n.p,{children:["This step is required when deploying IER to the cluster. Task Manager pods require the ",(0,t.jsx)(n.code,{children:"TM_JOB_URL"})," env variable to point to the location of the IER plugin."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",metastring:'title="fncmdeploy-tm-custom-env.yaml"',children:'kind: ConfigMap\napiVersion: v1\nmetadata:\n  name: fncmdeploy-tm-custom-env\n  labels:\n    app: fncmdeploy-tm-custom-env\ndata:\n  TM_JOB_URL: "https://fncmdeploy-ier-svc:9443/EnterpriseRecordsPlugin/IERApplicationPlugin.jar"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In our case, the TM_JOB_URL referenced ",(0,t.jsx)(n.a,{href:"https://www.ibm.com/docs/en/enterprise-records/5.2.1?topic=in-configuring-content-navigator-task-manager-enterprise-records#frmco011__1",children:"here"}),"\nneeds to point to the internal service URL, not the external URL as it does not exist."]}),"\n",(0,t.jsx)(n.p,{children:"This is also a custom env variable for Task Manager that we will enable in the CR below."}),"\n",(0,t.jsx)(n.p,{children:"Apply it to the cluster"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f fncmdeploy-tm-custom-env.yaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"update-the-cr-for-task-manager",children:"Update the CR for Task Manager"}),"\n",(0,t.jsx)(n.p,{children:"In the filenet CR you used to deploy the cluster, make the following changes and additions:"}),"\n",(0,t.jsxs)(n.p,{children:["Under the Task Manager application block in the CR add the ",(0,t.jsx)(n.code,{children:"custom_configmap"})," to point to the config map we just created. Also make sure the ",(0,t.jsx)(n.code,{children:"security_roles_to_group_mapping"})," are set to ",(0,t.jsx)(n.code,{children:"cpadmins"})," and ",(0,t.jsx)(n.code,{children:"cpusers"})," as these are the groups that exist in LDAP."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"        // highlight-start\n        custom_configmap:\n         - name: fncmdeploy-tm-custom-env\n           is_env: true\n        // highlight-end\n        # - name: <name of configmap>\n        #   volume_path:  # optional\n\n        ## All users/groups belong to one of three roles (Admin, User, or Auditor) that are specific to Task Manager.\n        ## Each role takes a list of users/groups (e.g., groups: [taskAdmins, taskAdmins2]).  Refer to Knowledge Center documentation for details.\n        security_roles_to_group_mapping:\n          task_admins:\n        // highlight-next-line\n            groups: [cpadmins]\n            users: []\n          task_users:\n        // highlight-next-line\n            groups: [cpusers]\n            users: []\n          task_auditors:\n        // highlight-next-line\n            groups: [cpadmins]\n            users: []\n"})}),"\n",(0,t.jsx)(n.h3,{id:"updating-cr-for-ier-deployment",children:"Updating CR for IER deployment"}),"\n",(0,t.jsx)(n.p,{children:"In the filenet CR you used to deploy the cluster, make the following changes and additions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"  content_optional_components:\n    cpe: true\n    graphql: true\n    cmis: false\n    css: false\n    es: false\n    tm: true\n    ban: true\n    // highlight-start\n    ier: true\n    // highlight-end\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the ",(0,t.jsx)(n.code,{children:"navigator_configuration"})," entry in the CR, add the following section"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'  ier_configuration:\n    arch:\n      amd64: "3 - Most preferred"\n    replica_count: 2\n    ier_ext_tls_secret_name:\n    ier_auth_ca_secret_name:\n    image:\n      // highlight-start\n      # This should point to whatever repo you staged the image in. Leave this as default if using IBM\'s registry\n      repository: cp.icr.io/cp/cp4a/ier/ier\n      // highlight-end\n      tag: ga-5218-ier-if005\n      pull_policy: IfNotPresent\n      // highlight-start\n      # This NEEDS to be set to the correct secret name. Make sure it\'s the one you created above.\n    ier_secret_name: ibm-ier-secret\n      // highlight-end\n    log:\n      format: json\n    resources:\n      requests:\n        cpu: 500m\n        memory: 512Mi\n      limits:\n        cpu: 1\n        memory: 1024Mi\n    auto_scaling:\n      enabled: false\n      max_replicas: 3\n      min_replicas: 1\n      target_cpu_utilization_percentage: 80\n    ier_production_setting:\n      license: accept\n    collectd_enable_plugin_write_graphite: false\n    run_as_user: \n    datavolume:\n      existing_pvc_for_ier_instance: ""\n    probe:\n      readiness:\n        initial_delay_seconds: 120\n        period_seconds: 5\n        timeout_seconds: 10\n        failure_threshold: 6\n      liveness:\n        initial_delay_seconds: 600\n        period_seconds: 5\n        timeout_seconds: 5\n        failure_threshold: 6\n'})}),"\n",(0,t.jsx)(n.h3,{id:"uploading-config-jars-to-the-task-manager-pod",children:"Uploading config jars to the Task Manager pod"}),"\n",(0,t.jsx)(n.p,{children:"Before we apply the modified CR, let's prepare the Task Manager pod."}),"\n",(0,t.jsx)(n.p,{children:"The following files are required for the Task Manager pod:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank",href:i(4320).Z+"",children:(0,t.jsx)(n.code,{children:"Jace.jar"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank",href:i(3642).Z+"",children:(0,t.jsx)(n.code,{children:"pe.jar"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank",href:i(1033).Z+"",children:(0,t.jsx)(n.code,{children:"peResources.jar"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank",href:i(3542).Z+"",children:(0,t.jsx)(n.code,{children:"TM-Liberty.xml"})})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The above files and how to get them are referenced ",(0,t.jsx)(n.a,{href:"https://www.ibm.com/docs/en/enterprise-records/5.2.1?topic=in-configuring-content-navigator-task-manager-enterprise-records#frmco011__1",children:"here"}),", but we've included them in our repo."]}),"\n",(0,t.jsx)(n.p,{children:"Retrieve the name of your existing Task Manager pod"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl get pods | grep tm-deploy\n//highlight-next-line\nfncmdeploy-tm-deploy-9db6b7f7f-6zzjb          1/1     Running   0          5d20h\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Push the jars downloaded above to the ",(0,t.jsx)(n.code,{children:"configDropins/overrides"})," directory on the Task Manager pod."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl cp Jace.jar fncmdeploy-tm-deploy-9db6b7f7f-6zzjb:configDropins/overrides\nkubectl cp pe.jar fncmdeploy-tm-deploy-9db6b7f7f-6zzjb:configDropins/overrides\nkubectl cp peResources.jar fncmdeploy-tm-deploy-9db6b7f7f-6zzjb:configDropins/overrides\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Push up the ",(0,t.jsx)(n.code,{children:"TM-Liberty.xml"})," file to ",(0,t.jsx)(n.code,{children:"configDropins/overrides"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl cp TM-Liberty.xml fncmdeploy-tm-deploy-9db6b7f7f-6zzjb:configDropins/overrides\n"})}),"\n",(0,t.jsx)(n.h3,{id:"apply-the-cr",children:"Apply the CR"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f ibm_fncm_cr_production.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Wait for about five minutes or so and then check to see if the pod has spun up."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl get pods\nNAME                                          READY   STATUS    RESTARTS   AGE\nfncmdeploy-cmis-deploy-654774fd5f-5xtnr       1/1     Running   0          6d6h\nfncmdeploy-cpe-deploy-7d7dbffc94-n86tt        1/1     Running   0          3d9h\nfncmdeploy-css-deploy-1-66bbd484b-qzrl9       1/1     Running   0          6d7h\nfncmdeploy-es-deploy-58f9659b8b-klmjh         1/1     Running   0          6d6h\nfncmdeploy-graphql-deploy-775766b99d-cx899    1/1     Running   0          6d6h\n// highlight-start\nfncmdeploy-ier-deploy-6f7465cd5d-sxp9d        1/1     Running   0          7h55m\n// highlight-end\nfncmdeploy-navigator-deploy-58b9c95c4-k9gx7   1/1     Running   0          157m\nfncmdeploy-tm-deploy-7d4fd64759-x28qw         1/1     Running   0          6d6h\nibm-fncm-operator-748884b478-qkd4f            1/1     Running   0          4d2h\npostgres-759fd876ff-d5fxd                     1/1     Running   0          6d9h\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ier-configuration",children:"IER Configuration"}),"\n",(0,t.jsx)(n.p,{children:"IBM Enterprise Records (IER) works in conjunction with FileNet Content Manager to provide the foundation for an enterprise compliance platform.\nBelow diagram is a presentation how the content in FileNet Content Manager and the record objects work together."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/99fc2f22-93c4-4ca9-89a9-e44599fd1553",alt:"Design"})}),"\n",(0,t.jsx)(n.p,{children:"On the left side is a folder in FileNet Content Manager that is in a record-enabled FileNet object store.\nOn the right side is a special object store that contains the record objects. This is called a File Plan Object Store."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/Create/Deploy/solution-deploy-operator#adding-object-stores",children:"Create the following objects stores"})," and configure them as mentioned. These are the prerequisite for IER Functaionality to work correctly."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"ROS - Object Store"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/Create/Deploy/solution-deploy-workflow#creating-a-workflow-system-and-connection-point-within-filenet",children:"Configure connection points"})," for ROS. Below is a screenshot for reference"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-processmining/assets/136734452/07ac22da-b1fa-4e32-98ec-ac5f0b69d617",alt:"ROS"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"FPOS - Object Store"}),"\n",(0,t.jsx)(n.p,{children:"Validate the FPOS object store is created:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-processmining/assets/136734452/46a43cb7-bed4-479c-88b0-6459a962fef1",alt:"FPOS"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"In the acce console create a CodeModules folder:"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/7fd4b69c-c98d-47c9-b705-20f35514816b",alt:"CodeModule"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"IER Task Manager Setup Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Configuring Task Manager for IER in ICN - In the systems content navigator administration interface go to the settings node:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/84f03641-1390-4516-b032-36d8d52a9f28",alt:"TMSetting"})}),"\n",(0,t.jsx)(n.p,{children:"Scroll down in the general tab under settings to Task Manager configuration and fill in the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Enable the task manager service"}),"\n",(0,t.jsxs)(n.li,{children:["Enter the task manager url","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This is the URL uing which other applications can comunicate with TM"}),"\n",(0,t.jsxs)(n.li,{children:["e.g. - ",(0,t.jsx)(n.em,{children:"http"})," or ",(0,t.jsx)(n.em,{children:"https"}),"  ",(0,t.jsxs)(n.em,{children:["://ServerName",":Portnumber","/taskManagerWeb/api/V1."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["ServerName =","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"ServiceName"})," if the IER pod is in the same namespace"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"ServiceName.Namespace"})," if the IER pod is in another namespace"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Specify the log diretcory"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/e1b091b4-d11d-497e-8717-1f2cb6cb775d",alt:"TMConfig"})}),"\n",(0,t.jsxs)(n.p,{children:["Add the TM_JOB_URL environment variable to the Task Manager deployment: ",(0,t.jsx)(n.a,{href:"https://www.ibm.com/docs/en/enterprise-records/5.2.1?topic=in-configuring-content-navigator-task-manager-enterprise-records#frmco011__1",children:"Task Manager in Container"})]}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:"IER Configuration on ICN"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Log in to ICN and navigate to Plugins and create a ",(0,t.jsx)(n.em,{children:"New Plug-in"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/5d96ce91-7660-4fb2-a9d0-d8d5e6d86ec7",alt:"AddPlugin"})}),"\n",(0,t.jsx)(n.p,{children:"Add JAR file path and hit load. It will look like this:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/d8288174-bfd7-4c9b-ac78-67faa6dd7b4f",alt:"ICNPLUGIN"})}),"\n",(0,t.jsx)(n.p,{children:"Save and Close. Edit the added plugin and scroll down. You will see the file plan repository like this and select Connect and then Click on the FPOS:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/1b23d73e-ba89-4daa-8ca2-0ec7839c77a8",alt:"ICNFILEPLANREPO"})}),"\n",(0,t.jsx)(n.p,{children:"Create a desktop IER and select repository FPOS."}),"\n",(0,t.jsxs)(n.p,{children:["Navigate to Repository Tab (",(0,t.jsx)(n.em,{children:"General"})," -> ",(0,t.jsx)(n.em,{children:"Authentication"})," -> ",(0,t.jsx)(n.em,{children:"Repository"}),") and add FPOS and ROS like it is shown below:\n",(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/f2126b91-d000-45d2-80c6-202d64ab9232",alt:"ICNREPO"})]}),"\n",(0,t.jsx)(n.p,{children:"Login to IER desk top and navigate to administration. IER desk top will be visible under desktops and FPOS repository would be visible under Repositories"}),"\n",(0,t.jsx)(n.p,{children:"IER desk top will have the options shown below:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/252b6535-f740-4b63-b4c1-551afc79d0bd",alt:"IERDESKTOP"})}),"\n",(0,t.jsxs)(n.p,{children:["Create a custom menu - Copy Document Context Menu and add the IER option as shown below:\n",(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/3460c13e-e64e-46db-b669-e5239c8f9763",alt:"CUSTOMMENU"}),"\nAdd the menu to the desktop where IER functionality is exceted. Below is the image where you can add the custom menu created on above step:\n",(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/c793b329-9e98-4d55-a3ac-80b7c7fe4055",alt:"CUSTOMMENU1"})]}),"\n",(0,t.jsx)(n.h2,{id:"profile-creation",children:"Profile Creation"}),"\n",(0,t.jsx)(n.p,{children:"Prerequsites :"}),"\n",(0,t.jsx)(n.p,{children:"1.File Plan Object Store is created"}),"\n",(0,t.jsx)(n.p,{children:"2.Record Object Store is created"}),"\n",(0,t.jsx)(n.p,{children:"3.Connection Point for IER is created"}),"\n",(0,t.jsxs)(n.p,{children:["To start Configuration Manager use below commands . ",(0,t.jsx)(n.em,{children:"ier_install_path"}),"  is the location where IBM Enterprise Record is installed."]}),"\n",(0,t.jsxs)(s.Z,{groupId:"operating-systems",children:[(0,t.jsx)(o.Z,{value:"win",label:"Windows",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"\nier_install_path\\configure\\configmgr.exe\n\n"})})}),(0,t.jsx)(o.Z,{value:"mac/linux",label:"macOS/Linux",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./ier_install_path/configure/configmgr \n"})})})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Follow below steps for profile creation . Do a ",(0,t.jsx)(n.em,{children:"Save"})," and ",(0,t.jsx)(n.em,{children:"Run Task"})," for each of those."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Create a profile:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/4bf29510-e6cd-438c-86fd-85701d7afc28",alt:"Createprofile"})}),"\n",(0,t.jsx)(n.p,{children:"Create Marking Sets and Add-ons:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/a72ea373-6f3e-49db-8408-2559c1b8b1a5",alt:"Markingset"})}),"\n",(0,t.jsx)(n.p,{children:"Configure File Plan Object Store:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/45f75363-24e8-4e52-9417-2dd3a3e706ed",alt:"ConfigFPOS"})}),"\n",(0,t.jsx)(n.p,{children:"Configure Record Object Store:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/1502302d-770a-4ab2-bd66-eb37feb64477",alt:"ConfigROS"})}),"\n",(0,t.jsx)(n.p,{children:"Configure Workflows:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/e462bd7f-5168-480f-a49b-7f6fb6129682",alt:"Configworkflows"})}),"\n",(0,t.jsx)(n.p,{children:"Transfer Workflows:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/c573b56f-5a33-46c7-b3d6-81dfbd4fd603",alt:"Transferworkflows"})}),"\n",(0,t.jsx)(n.p,{children:"Configure Content Engine Sweep:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/417c64f9-2a60-4e4b-a038-c5e2d2137249",alt:"Contentengsweep"})}),"\n",(0,t.jsx)(n.p,{children:"Upon Successful Completion the tasks would show like this in task view:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/ibm-client-engineering/solution-filenet-aws/assets/136734452/522e01cb-35a4-4441-bd60-818b0e198d53",alt:"Taskcomplete"})}),"\n",(0,t.jsx)(n.h2,{id:"appendix",children:"Appendix"}),"\n",(0,t.jsx)(n.h3,{id:"applying-fix-for-ier",children:"Applying fix for IER"}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"As of 23.0.x release of CP4BA, the following bug was introduced into IBM FileNet Content Manager:"}),(0,t.jsx)(n.p,{children:'When trying to access the IBM Enterprise Records desktop, an error message says that you cannot connect to the web client.\nThe log also shows that an exception was thrown "java.lang.NoClassDefFoundError: org.apache.xerces.xni.parser.XMLEntityResolver".'}),(0,t.jsx)(n.p,{children:"Cause:\nAfter moving to Java 11, IERApplicationPlugin.jar is unable to resolve the path to XercesImpl.jar in the ICN container."}),(0,t.jsxs)(n.p,{children:["Tracked in this ",(0,t.jsx)(n.a,{href:"https://www.ibm.com/support/pages/ibm-cloud-pak-business-automation-230x-known-limitations#I42202",children:"link"})]}),(0,t.jsx)(n.p,{children:"The following instructions handle addressing this missing jar file."})]}),"\n",(0,t.jsx)(n.p,{children:"We have included the required files here."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/ibm-client-engineering/solution-filenet-aws/blob/main/static/deployment_files/ExtraJars/ier-library.xml",children:"ier-library.xml"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/ibm-client-engineering/solution-filenet-aws/blob/main/static/deployment_files/ExtraJars/xercesImpl-2.12.2.jar",children:"xercesImpl-2.12.2.jar"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Keep in mind that future releases of CP4BA and FileNet may not require this fix to be applied. This is currently only applicable to 23.0.1."}),"\n",(0,t.jsx)(n.p,{children:"Determine the navigator pod with the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl get pods\nNAME                                          READY   STATUS    RESTARTS   AGE\nfncmdeploy-cmis-deploy-654774fd5f-5xtnr       1/1     Running   0          12d\nfncmdeploy-cpe-deploy-7d7dbffc94-n86tt        1/1     Running   0          9d\nfncmdeploy-css-deploy-1-66bbd484b-qzrl9       1/1     Running   0          12d\nfncmdeploy-es-deploy-58f9659b8b-klmjh         1/1     Running   0          12d\nfncmdeploy-graphql-deploy-775766b99d-cx899    1/1     Running   0          12d\nfncmdeploy-ier-deploy-6f7465cd5d-sxp9d        1/1     Running   0          6d8h\n// highlight-next-line\nfncmdeploy-navigator-deploy-58b9c95c4-kt6jc   1/1     Running   0          3d9h\nfncmdeploy-tm-deploy-7d4fd64759-x28qw         1/1     Running   0          12d\nibm-fncm-operator-748884b478-qkd4f            1/1     Running   0          10d\npostgres-759fd876ff-d5fxd                     1/1     Running   0          12d\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Create the ",(0,t.jsx)(n.code,{children:"ier-jars"})," subdirectory on the navigator pod:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl exec -it fncmdeploy-navigator-deploy-58b9c95c4-kt6jc -- mkdir configDropins/overrides/ier-jars\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Upload the ",(0,t.jsx)(n.code,{children:"ier-library.xml"})," and the ",(0,t.jsx)(n.code,{children:"xercesImpl-2.12.2.jar"})," to that subdirectory on the navigator pod."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl cp ier-library.xml fncmdeploy-navigator-deploy-58b9c95c4-kt6jc:configDropins/overrides/\nkubectl cp xercesImpl-2.12.2.jar fncmdeploy-navigator-deploy-58b9c95c4-kt6jc:configDropins/overrides/ier-jars/xercesImpl.jar\n"})}),"\n",(0,t.jsx)(n.p,{children:"Scale the navigator deployment down and up. If your replicas are more that 1, scale appropriately."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"kubectl scale deploy fncmdeploy-navigator-deploy --replicas=0\nkubectl scale deploy fncmdeploy-navigator-deploy --replicas=1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshoot",children:"Troubleshoot"}),"\n",(0,t.jsx)(n.h3,{id:"on-configuration-manager",children:"On Configuration Manager"}),"\n",(0,t.jsx)(n.p,{children:"If you see this error when running the Configure File Plan Object Store task:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Starting to run Configure File Plan Object Store\n\nConfigure File Plan Object Store *************************\nFinished running Configure File Plan Object Store\nAn error occurred while running Configure File Plan Object Store\nRunning the task failed with the following message: A network error occurred when processing a Web service request or response. See the nested exception for specific details. See full stack trace for details.  Message: Unexpected end of file from server Duration 50,063 milliseconds.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Workaround:\nUpdate config of ",(0,t.jsx)(n.code,{children:"server.xml"})," in the CPE pod, add a timeout for 10m:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cat server.xml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<server>\n<httpEndpoint id="defaultHttpEndpoint"\nreadTimeout="10m"\nhost="*"\nhttpPort="9080"\nhttpsPort="9443"\nprotocolVersion="http/1.1">\n<httpOptions PurgeDataDuringClose="true" />\n</httpEndpoint>\n</server>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"on-deploying-ier-ier-pod-doesnt-start-properly-or-it-starts-but-getting-ssl-related-error",children:"On deploying IER (IER pod doesn't start properly or it starts but getting ssl related error)"}),"\n",(0,t.jsx)(n.p,{children:"If your IER pod doesn't start:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Unable to attach or mount volumes: unmounted volumes=[custom-config-volume ier-custom-keystore-volume], unattached volumes=[], failed to process volumes=[]: timed out waiting for the condition\n"})}),"\n",(0,t.jsx)(n.p,{children:"OR IER pod running ok but you see some SSL related error prevent IER engine to start:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[ERROR ] CWWKS9582E: The [cssSSLSettings] sslRef attributes required by the orb element with the defaultOrb id have not been resolved within 10 seconds. As a result, the applications will not start. Ensure that you have included a keyStore element and that Secure Sockets Layer (SSL) is configured correctly. If the sslRef is defaultSSLConfig, then add a keyStore element with the id defaultKeyStore and a password.\n"})}),"\n",(0,t.jsx)(n.p,{children:"There is a workaround by manually uploading the plugin.jar to pod:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Copy ",(0,t.jsx)(n.code,{children:"IERApplicationPlugin.jar"})," from the latest IER fixpack."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"log onto Openshift and retrieve navigator pod:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"oc get pods | grep fncmdeploy-navigator\n\nfncmdeploy-navigator-deploy-f64db4b8f-jj44k   1/1     Running   1 (18d ago)   18d\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Upload IER plugin jar to plug-in store:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"oc cp IERApplicationPlugin.jar fncmdeploy-navigator-deploy-f64db4b8f-jj44k:/opt/ibm/plugins\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"upload IER plugin jar to Task Manager pod: configdropin/overrrides & :/opt/ibm/extTM:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"oc get pod | grep navigator\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"oc cp IERApplicationPlugin.jar fncmdeploy-tm-deploy-854595dfcd-ptwm6:configDropins/overrides\noc cp IERApplicationPlugin.jar fncmdeploy-tm-deploy-854595dfcd-ptwm6:/opt/ibm/extTM\n"})}),"\n",(0,t.jsx)(n.h3,{id:"on-content-navigator-when-declaring-fpos-as-file-plan-repository",children:"On Content Navigator (when declaring FPOS as File Plan repository)"}),"\n",(0,t.jsx)(n.p,{children:"If you see error when declaring FPOS as File Plan repository:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a file named ier-library.xml containing:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<server>\n  <library id="FileNetLib">\n    <fileset dir="${server.config.dir}/configDropins/overrides/ier-jars" includes="*.jar" scanInterval="5s" />\n  </library>\n</server>\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Copy ",(0,t.jsx)(n.code,{children:"xercesImpl-2.12.2.jar"})," from ",(0,t.jsx)(n.code,{children:"<IER_install_path>/API/JARM"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Navigate to your navigator pod, cd to ",(0,t.jsx)(n.code,{children:"/opt/ibm/wlp/usr/servers/defaultServer/configDropins/overrides"})," and create a folder:"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"mkdir ier-jars\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Then upload the files from local machine to pod:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"oc cp ier-library.xml fncmdeploy-navigator-deploy-f64db4b8f-25xz5:/opt/ibm/wlp/usr/servers/defaultServer/configDropins/overrides\n\noc cp xercesImpl-2.12.2.jar fncmdeploy-navigator-deploy-f64db4b8f-25xz5::/opt/ibm/wlp/usr/servers/defaultServer/configDropins/overrides/ier-jars/\n"})}),"\n",(0,t.jsx)(n.h3,{id:""})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},425:(e,n,i)=>{i.d(n,{Z:()=>o});i(7294);var t=i(4334);const r={tabItem:"tabItem_Ymn6"};var s=i(5893);function o(e){let{children:n,hidden:i,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.Z)(r.tabItem,o),hidden:i,children:n})}},3992:(e,n,i)=>{i.d(n,{Z:()=>w});var t=i(7294),r=i(4334),s=i(2957),o=i(6550),l=i(1270),a=i(5238),c=i(3609),d=i(2560);function p(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:i}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return p(e).map((e=>{let{props:{value:n,label:i,attributes:t,default:r}}=e;return{value:n,label:i,attributes:t,default:r}}))}(i);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function u(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:i}=e;const r=(0,o.k6)(),s=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,a._X)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function f(e){const{defaultValue:n,queryString:i=!1,groupId:r}=e,s=h(e),[o,a]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=i.find((e=>e.default))??i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,p]=g({queryString:i,groupId:r}),[f,m]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,d.Nk)(i);return[r,(0,t.useCallback)((e=>{i&&s.set(e)}),[i,s])]}({groupId:r}),x=(()=>{const e=c??f;return u({value:e,tabValues:s})?e:null})();(0,l.Z)((()=>{x&&a(x)}),[x]);return{selectedValue:o,selectValue:(0,t.useCallback)((e=>{if(!u({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);a(e),p(e),m(e)}),[p,m,s]),tabValues:s}}var m=i(1048);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=i(5893);function b(e){let{className:n,block:i,selectedValue:t,selectValue:o,tabValues:l}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),d=e=>{const n=e.currentTarget,i=a.indexOf(n),r=l[i].value;r!==t&&(c(n),o(r))},p=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=a.indexOf(e.currentTarget)+1;n=a[i]??a[0];break}case"ArrowLeft":{const i=a.indexOf(e.currentTarget)-1;n=a[i]??a[a.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},n),children:l.map((e=>{let{value:n,label:i,attributes:s}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>a.push(e),onKeyDown:p,onClick:d,...s,className:(0,r.Z)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":t===n}),children:i??n},n)}))})}function y(e){let{lazy:n,children:i,selectedValue:r}=e;const s=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===r));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function v(e){const n=f(e);return(0,j.jsxs)("div",{className:(0,r.Z)("tabs-container",x.tabList),children:[(0,j.jsx)(b,{...e,...n}),(0,j.jsx)(y,{...e,...n})]})}function w(e){const n=(0,m.Z)();return(0,j.jsx)(v,{...e,children:p(e.children)},String(n))}},4320:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/files/Jace-2ff77484453703cde357cb0265c40e45.jar"},3542:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/files/TM-Liberty-395ab308d6b63dfeb248f7e2ae84e524.xml"},3642:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/files/pe-c5d21fd931013bfd946e95b0691e7b00.jar"},1033:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/files/peResources-675de07619c049aee793af612daf0824.jar"},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>o});var t=i(7294);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);